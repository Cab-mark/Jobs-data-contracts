openapi: 3.0.3
info:
  title:  Indexer Schemas
  version: "1.0.0"
  description: |
    This OpenAPI document contains the component schemas used by the search-engine
    indexing service.  It is intended solely for indexing and mapping job data
    (Job models and related types) and does not define any API operations. 
servers:
  - url:  https://api.example.com
paths: {}

components:
  schemas:
    Job:
      type: object
      description: Full job posting object
      properties: 
        id:
          type: string
          description: Internal unique identifier (generated by the system)
        externalId:
          type: string
          description: External/third-party identifier (provided by client, readonly after creation)
        approach:
          $ref: "#/components/schemas/Approach"
        title:
          type: string
        description:
          type:  string
        organisation:
          type:  string
        location:
          oneOf:
            - type:  array
              description: An array of fixed UK locations (all items are FixedLocations)
              minItems: 1
              items:  
                $ref: "#/components/schemas/FixedLocations"
            - type: array
              description: An array of overseas locations (all items are OverseasLocations)
              minItems:  1
              items:
                $ref: "#/components/schemas/OverseasLocations"
        grade:
          anyOf:  
            - $ref: "#/components/schemas/Grade"
            - type: string
        assignmentType:
          $ref:  "#/components/schemas/Assignments"
        workLocation:
          type:  array
          description:  Primary work location(s)
          items:
            $ref:  "#/components/schemas/WorkLocation"
        workingPattern: 
          type: array
          description:  Working pattern(s)
          items:
            $ref:  "#/components/schemas/WorkingPattern"
        personalSpec: 
          type: string
          description:  Personal specification content (HTML or text)
        applyDetail:
          type:  string
          description:  Application details/instructions
        datePosted: 
          type: string
          format:  date-time
          description: Date the job was posted
        dateClosing: 
          type: string
          format:  date-time
          description:  Closing date/time for applications
        profession:
          $ref: "#/components/schemas/Profession"
        recruitmentEmail:
          type: string
          format: email
        contacts: 
          type: array
          items: 
            $ref: "#/components/schemas/Contacts"
        nationalityRequirement:
          type:  string
        summary:
          type: string
        applyUrl: 
          type: string
          format: uri
        benefits: 
          type: string
        salary:  
          $ref: "#/components/schemas/Salary"
        jobNumbers:
          type:  integer
        successProfileDetails: 
          type: string
        diversityStatement:
          type: string
        disabilityConfident: 
          type: string
        dcStatus: 
          $ref: "#/components/schemas/DCStatus"
        redeploymentScheme: 
          type: string
        prisonScheme:
          type: string
        veteranScheme: 
          type: string
        criminalRecordCheck: 
          type:  string
        complaintsInfo: 
          type: string
        workingForTheCivilService: 
          type: string
        eligibilityCheck:
          type: string
        attachments:
          type:  array
          items:
            $ref: "#/components/schemas/JobAttachment"
      required: 
        - id
        - externalId
        - approach
        - title
        - description
        - organisation
        - location
        - grade
        - assignmentType
        - workLocation
        - workingPattern
        - personalSpec
        - applyDetail
        - datePosted
        - dateClosing
        - profession
        - recruitmentEmail

    JobIndex:
      type: object
      description: Job object for search indexing
      properties:
        id:
          type: string
          description: Internal unique identifier (generated by the system)
        externalId:
          type: string
          description: External/third-party identifier (provided by client, readonly after creation)
        approach:
          $ref: "#/components/schemas/Approach"
        title: 
          type: string
        description: 
          type:  string
        organisation:
          type: string
        location:
          oneOf:
            - type:  array
              description: An array of fixed UK locations (all items are FixedLocations)
              minItems: 1
              items: 
                $ref: "#/components/schemas/FixedLocations"
            - type: array
              description: An array of overseas locations (all items are OverseasLocations)
              minItems: 1
              items:
                $ref: "#/components/schemas/OverseasLocations"
        grade:
          anyOf: 
            - $ref: "#/components/schemas/Grade"
            - type: string
        assignmentType:
          $ref: "#/components/schemas/Assignments"
        workLocation:
          type:  array
          description: Primary work location(s)
          items:
            $ref:  "#/components/schemas/WorkLocation"
        workingPattern: 
          type: array
          description:  Working pattern(s)
          items:
            $ref: "#/components/schemas/WorkingPattern"
        personalSpec:
          type: string
          description: Personal specification content (HTML or text)
        datePosted: 
          type: string
          format:  date-time
          description: Date the job was posted
        dateClosing:
          type: string
          format: date-time
          description: Closing date/time for applications
        profession:
          $ref: "#/components/schemas/Profession"
        summary:
          type: string
        salary:
          $ref: "#/components/schemas/Salary"
      required:
        - id
        - externalId
        - approach
        - title
        - description
        - organisation
        - location
        - grade
        - assignmentType
        - workLocation
        - workingPattern
        - personalSpec
        - datePosted
        - dateClosing
        - profession

    JobAttachment:
      type: object
      properties:
        href:  
          type: string
          format:  uri
        docName:
          type: string
        docFormat: 
          type:  string
        fileSize:
          type: string
      required: 
        - href
        - docName
        - docFormat

    FixedLocations:
      type: object
      properties:
        uprn: 
          type:  string
        paoText: 
          type: string
          description:  Optional â€” may be omitted or null
        saoText:
          type: string
        streetDescription: 
          type: string
        townName:
          type: string
        region:
          type: string
        postcode: 
          type: string
        latitude: 
          type: number
          format:  double
        longitude: 
          type: number
          format:  double
      required:
        - townName
        - region
        - latitude
        - longitude
      description: >
        Fixed UK address/location fields aligned to the TypeScript interface:
        uprn, paoText, saoText, streetDescription and postcode are optional;
        townName, region, latitude and longitude are required.

    OverseasLocations:
      type:   object
      properties:
        countryName:
          type:  string
        countryCode: 
          type: string
        locationDisplay: 
          type: string
      required:
        - countryName
        - countryCode

    Salary:
      type:  object
      properties:
        minimum: 
          type: number
          format:  double
        maximum:
          type: number
          format: double
        currency: 
          type: string
        currencySymbol: 
          type:  string
        salaryDetails: 
          type: string
      required: 
        - minimum
        - currency

    Contacts: 
      type: object
      properties: 
        contactName:
          type:  string
        contactEmail: 
          type: string
          format:  email
        contactPhone: 
          type: string
      required:  
        - contactName
        - contactEmail

    Approach:  
      type: string
      description:  Recruitment approach
      enum: 
        - Internal
        - Across Government
        - External

    Assignments:
      type: string
      description: Assignment / contract type
      enum: 
        - Apprentice
        - Fixed Term Appointment (FTA)
        - Loan
        - Secondment
        - Permanent

    WorkLocation:
      type: string
      description: Work location
      enum: 
        - Home based
        - Office based

    WorkingPattern: 
      type: string
      description: Working pattern
      enum: 
        - Full-time
        - Part-time

    Grade: 
      type: string
      description:   Grade / seniority
      enum:
        - Senior Civil Service - Permanent Secretary
        - Senior Civil Service - Director General (PB3)
        - Senior Civil Service - Director (PB2)
        - Senior Civil Service - Deputy Director (PB1/1A)
        - Grade 6
        - Grade 7
        - Senior Executive Officer (SEO)
        - Higher Executive Officer (HEO)
        - Executive Officer (EO)
        - Administrative Officer (AO)
        - Administrative Assistant (AA)

    Profession:
      type: string
      description:  Profession / occupational group
      enum:
        - Actuary
        - Commercial
        - Communications
        - Corporate Finance
        - Counter Fraud
        - Digital and Data
        - Economics
        - Finance
        - Geography
        - Human Resources
        - Intelligence Analysis
        - Internal Audit
        - International Trade
        - Knowledge and Information Management
        - Legal
        - Clinical
        - Occupational Psychology
        - Operational Delivery
        - Operational Research
        - Planning
        - Planning Inspection
        - Policy
        - Project Delivery
        - Property
        - Risk Management
        - Science and Engineering
        - Security
        - Social Research
        - Statistics
        - Tax
        - Veterinary

    DCStatus:
      type:  string
      description:  Disability confident status
      enum: 
        - Committed
        - Disability Confident Employer
        - Disability Confident Leader